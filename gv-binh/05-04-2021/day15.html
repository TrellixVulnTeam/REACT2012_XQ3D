<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />

    <style>
        .err {
            border-color: #dc3545
        }
        .err:focus {
            border-color: #dc3545;
            box-shadow: 0 0 0 0.2rem rgb(223 61 91 / 25%);
        }
    </style>
  </head>
  <body>
    <div class="container">
      <form onsubmit="signUp(event)">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputEmail4">First name *</label>
            <input type="text" class="form-control" id="firstName" oninput="checkValid(event)"/>
          </div>
          <div class="form-group col-md-6">
            <label for="inputPassword4">Last name *</label>
            <input type="text" class="form-control" id="lastName" />
          </div>
        </div>
        <div class="form-group">
          <label for="inputAddress">Email *</label>
          <input
            type="email"
            class="form-control"
            id="email"
          />
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputEmail4">Password *</label>
            <input type="password" class="form-control" id="pass" />
          </div>
          <div class="form-group col-md-6">
            <label for="inputPassword4">Confirm password *</label>
            <input type="password" class="form-control" id="confirmPass" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputEmail4">Tuổi *</label>
            <select class="custom-select" id="age">
              <option value="" selected>Chọn tuổi</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Sign in</button>
      </form>
    </div>

    <script>
      var firstName = document.getElementById("firstName");
      var errFirstName = document.getElementById('errFirst');
      var lastName = document.getElementById("lastName");
      var email = document.getElementById("email");
      var pass = document.getElementById("pass");
      var confirmPass = document.getElementById("confirmPass");
      var age = document.getElementById("age");

      var required = document.createElement('span');
        required.classList.add('text-danger');
        required.textContent = 'This is required!';

      var regexEmail = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;


      function signUp(e) {
        e.preventDefault();

        console.log(age.value);
        if (firstName.value === "") {
            firstName.classList.add('err');
            firstName.insertAdjacentElement('afterend',required);
            firstName.focus();
        } else if (firstName.value.length < 2) {
            required.textContent = 'Tối thiểu là 2 ký tự!';
            firstName.classList.add('err');
            firstName.insertAdjacentElement('afterend',required);
            firstName.focus();
        } else if(lastName.value === '') {
            alert('Last name is required!');
        } else if(lastName.value.length < 2) {
            alert("Tối thiểu là 2 ký tự!");
        } else if(email.value === '') {
            alert("Email is required!");
        } else if(!regexEmail.test(String(email.value).toLowerCase())) {
            alert('Email chưa đúng định dạng')
        } else if(pass.value === '') {
            alert("Password is required!");
        } else if(confirmPass.value !== pass.value) {
            alert("Mật khẩu không trùng khớp");
        } else if(age.value === '') {
            alert("Age is required!");
        } else {
            alert('Đăng ký thành công!')
        }
      }

      function checkValid(e) {
        if (e.target.value.length > 2 || e.target.value !== '') {
            required.textContent = '';
            firstName.classList.remove('err');
        }


      } 

      setInterval(() => {
          console.log('tôi đây')
      }, 1000)
    </script>
  </body>
</html>
